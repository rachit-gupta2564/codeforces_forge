<h3><a href="https://codeforces.com/contest/2162/problem/H" target="_blank" rel="noopener noreferrer">Beautiful Problem</a></h3>

<div class="header"><div class="title">H. Beautiful Problem</div><div class="time-limit"><div class="property-title">time limit per test</div>2 seconds</div><div class="memory-limit"><div class="property-title">memory limit per test</div>256 megabytes</div><div class="input-file input-standard"><div class="property-title">input</div>standard input</div><div class="output-file output-standard"><div class="property-title">output</div>standard output</div></div><div><p>For an array <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">a</span></span></span>$a$ of length <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4">n</span></span></span>$n$ and three integers <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-5"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">x</span></span></span>$x$, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-7"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8">l</span></span></span>$l$, and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-9"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10">r</span></span></span>$r$（<span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-11"><span class="MJXp-mn" id="MJXp-Span-12">1</span><span class="MJXp-mo" id="MJXp-Span-13" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14">l</span><span class="MJXp-mo" id="MJXp-Span-15" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-16">r</span><span class="MJXp-mo" id="MJXp-Span-17" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18">n</span></span></span>$1 \le l \le r \le n$), define:</p><p><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-19"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20">f</span><span class="MJXp-mo" id="MJXp-Span-21" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22">a</span><span class="MJXp-mo" id="MJXp-Span-23" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24">x</span><span class="MJXp-mo" id="MJXp-Span-25" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-26">l</span><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-28">r</span><span class="MJXp-mo" id="MJXp-Span-29" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-30" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-31"><span class="MJXp-mo" id="MJXp-Span-32" style="margin-left: 0em; margin-right: 0em;">{</span><span class="MJXp-mtable" id="MJXp-Span-33"><span class="MJXp-mtr" id="MJXp-Span-34"><span class="MJXp-mtd" id="MJXp-Span-35"><span class="MJXp-mn" id="MJXp-Span-36">0</span><span class="MJXp-mo" id="MJXp-Span-37" style="margin-left: 0em; margin-right: 0.222em;">,</span></span><span class="MJXp-mtd" id="MJXp-Span-38"><span class="MJXp-mtext" id="MJXp-Span-39">if</span></span><span class="MJXp-mtd" id="MJXp-Span-40"><span class="MJXp-mo" id="MJXp-Span-41" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">x</span><span class="MJXp-mo" id="MJXp-Span-43" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-munderover" id="MJXp-Span-44"><span class="MJXp-mo" id="MJXp-Span-45">min</span></span></span></span></span></span></span></span>$f(a,x,l,r) = \begin{cases} 0, & \text{if} & (x-\min_{j=l}^{r}(a_j)) \cdot (x-\max_{j=l}^{r}(a_j))) < 0 \\ 1, & \text{if} & (x-\min_{j=l}^{r}(a_j)) \cdot (x-\max_{j=l}^{r}(a_j))) \ge 0 \end{cases}$</p><p>You are given an array <span class="MathJax_Preview">a</span>$a$ of length <span class="MathJax_Preview">n</span>$n$ (<span class="MathJax_Preview">1 \le a_i \le n</span>$1 \le a_i \le n$), and <span class="MathJax_Preview">m</span>$m$ intervals <span class="MathJax_Preview">[l_i, r_i]</span>$[l_i, r_i]$ (<span class="MathJax_Preview">1 \le l_i \le r_i \le n</span>$1 \le l_i \le r_i \le n$).</p><p>For each <span class="MathJax_Preview">x=1, 2, \dots, n</span>$x=1, 2, \dots, n$, answer the following question <span class="tex-font-style-bf">independently</span>:</p><ul> <li> Does there exist a rearrangement <span class="MathJax_Preview">a'</span>$a'$ of <span class="MathJax_Preview">a</span>$a$, such that for <span class="tex-font-style-bf">all</span> <span class="MathJax_Preview">1 \le i \le m</span>$1 \le i \le m$, <span class="MathJax_Preview">f(a',x,l_i,r_i) = 1</span>$f(a',x,l_i,r_i) = 1$? </li></ul></div><div class="input-specification"><div class="section-title">Input</div><p>The first line contains a single integer <span class="MathJax_Preview">t</span>$t$ (<span class="MathJax_Preview">1 \le t \le 2 \cdot 10^4</span>$1 \le t \le 2 \cdot 10^4$) — the number of test cases. Description of each testcase follows. </p><p>The first line contains two integers <span class="MathJax_Preview">n</span>$n$ and <span class="MathJax_Preview">m</span>$m$ (<span class="MathJax_Preview">2 \le n \le 2000</span>$2 \le n \le 2000$, <span class="MathJax_Preview">1 \le m \le 2000</span>$1 \le m \le 2000$).</p><p>The next line contains <span class="MathJax_Preview">n</span>$n$ space-separated integers <span class="MathJax_Preview">a_1, a_2, \cdots, a_n</span>$a_1, a_2, \cdots, a_n$ (<span class="MathJax_Preview">1 \le a_i \le n</span>$1 \le a_i \le n$).</p><p>The next <span class="MathJax_Preview">m</span>$m$ lines each contain two space-separated integers <span class="MathJax_Preview">l_i, r_i</span>$l_i, r_i$ (<span class="MathJax_Preview">1 \le l_i \le r_i \le n</span>$1 \le l_i \le r_i \le n$), each denoting an interval.</p><p>It is guaranteed that the sum of <span class="MathJax_Preview">n^2</span>$n^2$ and the sum of <span class="MathJax_Preview">m^2</span>$m^2$ over all test cases does not exceed <span class="MathJax_Preview">4 \cdot 10^6</span>$4 \cdot 10^6$, respectively.</p></div><div class="output-specification"><div class="section-title">Output</div><p>For each test case, output a binary string <span class="MathJax_Preview">s</span>$s$. For <span class="MathJax_Preview">x=1,2,\ldots,n</span>$x=1,2,\ldots,n$, <span class="MathJax_Preview">s_x=1</span>$s_x=1$ only if there exists a rearrangement <span class="MathJax_Preview">a'</span>$a'$ of <span class="MathJax_Preview">a</span>$a$, such that for <span class="tex-font-style-bf">all</span> <span class="MathJax_Preview">1 \le i \le m</span>$1 \le i \le m$, <span class="MathJax_Preview">f(a',x,l_i,r_i) = 1</span>$f(a',x,l_i,r_i) = 1$. Otherwise, <span class="MathJax_Preview">s_x=0</span>$s_x=0$.</p></div><div class="sample-tests"><div class="section-title">Example</div><div class="sample-test"><div class="input"><div class="title">Input<div title="Copy" data-clipboard-target="#id0022532777815594718" id="id00726578030566021" class="input-output-copier">Copy</div></div><pre id="id0022532777815594718"><div class="test-example-line test-example-line-even test-example-line-0">4</div><div class="test-example-line test-example-line-odd test-example-line-1">4 2</div><div class="test-example-line test-example-line-odd test-example-line-1">1 1 3 4</div><div class="test-example-line test-example-line-odd test-example-line-1">1 2</div><div class="test-example-line test-example-line-odd test-example-line-1">2 4</div><div class="test-example-line test-example-line-even test-example-line-2">3 2</div><div class="test-example-line test-example-line-even test-example-line-2">1 1 3</div><div class="test-example-line test-example-line-even test-example-line-2">1 2</div><div class="test-example-line test-example-line-even test-example-line-2">2 3</div><div class="test-example-line test-example-line-odd test-example-line-3">3 1</div><div class="test-example-line test-example-line-odd test-example-line-3">1 1 1</div><div class="test-example-line test-example-line-odd test-example-line-3">1 3</div><div class="test-example-line test-example-line-even test-example-line-4">9 3</div><div class="test-example-line test-example-line-even test-example-line-4">4 5 9 1 1 1 2 2 3</div><div class="test-example-line test-example-line-even test-example-line-4">1 6</div><div class="test-example-line test-example-line-even test-example-line-4">3 7</div><div class="test-example-line test-example-line-even test-example-line-4">7 9</div></pre></div><div class="output"><div class="title">Output<div title="Copy" data-clipboard-target="#id0003379601753939221" id="id0038713953724815586" class="input-output-copier">Copy</div></div><pre id="id0003379601753939221"><div class="test-example-line test-example-line-odd test-example-line-1">1011</div><div class="test-example-line test-example-line-even test-example-line-2">101</div><div class="test-example-line test-example-line-odd test-example-line-3">111</div><div class="test-example-line test-example-line-even test-example-line-4">100100001</div></pre></div></div></div><div class="note"><div class="section-title">Note</div><p>In the first test case,</p><ul> <li> For <span class="MathJax_Preview">x=1</span>$x=1$, one valid rearrangement is <span class="MathJax_Preview">a'=[1,1,3,4]</span>$a'=[1,1,3,4]$. </li><li> For <span class="MathJax_Preview">x=2</span>$x=2$, there is no rearrangement <span class="MathJax_Preview">a'</span>$a'$ of <span class="MathJax_Preview">a</span>$a$ satisfying <span class="MathJax_Preview">f(a',2,1,2)=f(a',2,2,4)=1</span>$f(a',2,1,2)=f(a',2,2,4)=1$. </li><li> For <span class="MathJax_Preview">x=3</span>$x=3$, the <span class="tex-font-style-bf">only</span> valid rearrangement is <span class="MathJax_Preview">a'=[4,3,1,1]</span>$a'=[4,3,1,1]$. </li><li> For <span class="MathJax_Preview">x=4</span>$x=4$, one valid rearrangement is <span class="MathJax_Preview">a'=[1,1,3,4]</span>$a'=[1,1,3,4]$. </li></ul></div>